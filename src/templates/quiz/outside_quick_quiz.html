{% extends "base.html" %}

{% block title %}Quick Quiz - Smart E-Note{% endblock %}

{% block content %}

<div class="max-w-2xl mx-auto">

    <!-- Page Header -->
    <div class="bg-white rounded-lg border border-gray-200 px-6 py-4 mb-6">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-amber-50 rounded-lg flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor" class="w-6 h-6 text-amber-600">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
                </svg>
            </div>
            <div>
                <h1 class="text-xl font-bold text-gray-800">Quick Quiz</h1>
                <p class="text-xs text-gray-500">Generate a custom quiz to test your knowledge</p>
            </div>
        </div>
    </div>

    <!-- Quiz Form -->
    <div class="bg-white border border-gray-200 rounded-lg p-6">

        <form method="POST" action="/quiz/quick_quiz" onsubmit="showQuizLoader()">

            <!-- Topic -->
            <div class="mb-5">
                <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="w-4 h-4 text-gray-500">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 6.042A8.967 8.967 0 006 3.75c-1.036 0-2.04.186-3 .534V18a10.5 10.5 0 013-.534c2.032 0 3.98.6 5.75 1.63m.25-13.054A8.967 8.967 0 0118 3.75c1.036 0 2.04.186 3 .534V18a10.5 10.5 0 00-3-.534c-2.032 0-3.98.6-5.75 1.63m0-13.054v13.054" />
                    </svg>
                    Topic or Concept
                </label>
                <textarea name="content" required rows="3"
                    placeholder="e.g. Past Simple Tense, Business Vocabulary, Common Phrasal Verbs..."
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"></textarea>
                <p class="text-xs text-gray-500 mt-1">Enter the topic you want to be quizzed on</p>
            </div>

            <!-- Number of Questions -->
            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="w-4 h-4 text-gray-500">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5" />
                    </svg>
                    Number of Questions
                </label>
                <select name="count"
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                    <option value="5">5 Questions</option>
                    <option value="10" selected>10 Questions</option>
                    <option value="15">15 Questions</option>
                    <option value="20">20 Questions</option>
                </select>
            </div>

            <!-- Divider -->
            <div class="border-t border-gray-200 mb-6"></div>

            <!-- Submit Button -->
            <button type="submit"
                class="w-full bg-amber-600 text-white py-3 rounded-lg font-medium hover:bg-amber-700 flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                </svg>
                Generate Quiz
            </button>

        </form>

        <!-- Info Box -->
        <div class="mt-6 bg-amber-50 border border-amber-200 rounded-lg p-4">
            <div class="flex items-start gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor" class="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                </svg>
                <div>
                    <p class="text-sm font-medium text-amber-800 mb-1">Tips for better quizzes:</p>
                    <ul class="text-xs text-amber-700 space-y-1">
                        <li>• Be specific about the topic you want to practice</li>
                        <li>• Start with fewer questions to test the difficulty</li>
                        <li>• You can include multiple topics separated by commas</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

</div>

<!-- Quiz Loader Modal -->
<div id="quizLoader" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-2xl p-8 max-w-sm mx-4">
        <div class="text-center">
            <!-- Animated Spinner -->
            <div class="relative w-16 h-16 mx-auto mb-4">
                <div class="absolute inset-0 border-4 border-amber-200 rounded-full"></div>
                <div class="absolute inset-0 border-4 border-amber-600 border-t-transparent rounded-full animate-spin">
                </div>
            </div>

            <!-- Loading Text -->
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Generating Your Quiz</h3>
            <p class="text-sm text-gray-600 mb-4">Please wait while we create your personalized quiz...</p>

            <!-- Progress Animation -->
            <div class="flex items-center justify-center gap-1">
                <div class="w-2 h-2 bg-amber-600 rounded-full animate-bounce" style="animation-delay: 0ms"></div>
                <div class="w-2 h-2 bg-amber-600 rounded-full animate-bounce" style="animation-delay: 150ms"></div>
                <div class="w-2 h-2 bg-amber-600 rounded-full animate-bounce" style="animation-delay: 300ms"></div>
            </div>
        </div>
    </div>
</div>

<script>
    function showQuizLoader() {
        document.getElementById("quizLoader").classList.remove("hidden");
        document.getElementById("quizLoader").classList.add("flex");
    }

    // Prevent multiple submissions
    document.querySelector('form').addEventListener('submit', function (e) {
        const submitBtn = this.querySelector('button[type="submit"]');
        if (submitBtn.disabled) {
            e.preventDefault();
            return false;
        }
        submitBtn.disabled = true;
    });
</script>

{% endblock %}